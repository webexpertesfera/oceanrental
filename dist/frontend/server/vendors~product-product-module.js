exports.ids=[8],exports.modules={"k/Yu":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return CrystalLightboxModule}),__webpack_require__.d(__webpack_exports__,"b",function(){return crystalui_angular_lightbox_LightboxDirective}),__webpack_require__.d(__webpack_exports__,"c",function(){return LightboxGroupDirective});var tslib=__webpack_require__("zOht"),core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),Subject=__webpack_require__("XNiG"),AsyncAction=__webpack_require__("3N8a");class QueueAction_QueueAction extends AsyncAction.a{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work}schedule(state,delay=0){return delay>0?super.schedule(state,delay):(this.delay=delay,this.state=state,this.scheduler.flush(this),this)}execute(state,delay){return delay>0||this.closed?super.execute(state,delay):this._execute(state,delay)}requestAsyncId(scheduler,id,delay=0){return null!==delay&&delay>0||null===delay&&this.delay>0?super.requestAsyncId(scheduler,id,delay):scheduler.flush(this)}}var AsyncScheduler=__webpack_require__("IjjT");class QueueScheduler_QueueScheduler extends AsyncScheduler.a{}const queue=new QueueScheduler_QueueScheduler(QueueAction_QueueAction);var Subscription=__webpack_require__("quSY"),Subscriber=__webpack_require__("7o/Q"),Notification=__webpack_require__("WMd4");class observeOn_ObserveOnSubscriber extends Subscriber.a{constructor(destination,scheduler,delay=0){super(destination),this.scheduler=scheduler,this.delay=delay}static dispatch(arg){const{notification:notification,destination:destination}=arg;notification.observe(destination),this.unsubscribe()}scheduleMessage(notification){this.destination.add(this.scheduler.schedule(observeOn_ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))}_next(value){this.scheduleMessage(Notification.a.createNext(value))}_error(err){this.scheduleMessage(Notification.a.createError(err)),this.unsubscribe()}_complete(){this.scheduleMessage(Notification.a.createComplete()),this.unsubscribe()}}class ObserveOnMessage{constructor(notification,destination){this.notification=notification,this.destination=destination}}var ObjectUnsubscribedError=__webpack_require__("9ppp"),SubjectSubscription=__webpack_require__("Ylt2");class ReplaySubject_ReplaySubject extends Subject.a{constructor(bufferSize=Number.POSITIVE_INFINITY,windowTime=Number.POSITIVE_INFINITY,scheduler){super(),this.scheduler=scheduler,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=bufferSize<1?1:bufferSize,this._windowTime=windowTime<1?1:windowTime,windowTime===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(value){if(!this.isStopped){const _events=this._events;_events.push(value),_events.length>this._bufferSize&&_events.shift()}super.next(value)}nextTimeWindow(value){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),value)),this._trimBufferThenGetEvents()),super.next(value)}_subscribe(subscriber){const _infiniteTimeWindow=this._infiniteTimeWindow,_events=_infiniteTimeWindow?this._events:this._trimBufferThenGetEvents(),scheduler=this.scheduler,len=_events.length;let subscription;if(this.closed)throw new ObjectUnsubscribedError.a;if(this.isStopped||this.hasError?subscription=Subscription.a.EMPTY:(this.observers.push(subscriber),subscription=new SubjectSubscription.a(this,subscriber)),scheduler&&subscriber.add(subscriber=new observeOn_ObserveOnSubscriber(subscriber,scheduler)),_infiniteTimeWindow)for(let i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i]);else for(let i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i].value);return this.hasError?subscriber.error(this.thrownError):this.isStopped&&subscriber.complete(),subscription}_getNow(){return(this.scheduler||queue).now()}_trimBufferThenGetEvents(){const now=this._getNow(),_bufferSize=this._bufferSize,_windowTime=this._windowTime,_events=this._events,eventsCount=_events.length;let spliceCount=0;for(;spliceCount<eventsCount&&!(now-_events[spliceCount].time<_windowTime);)spliceCount++;return eventsCount>_bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-_bufferSize)),spliceCount>0&&_events.splice(0,spliceCount),_events}}class ReplayEvent{constructor(time,value){this.time=time,this.value=value}}const _c0=["imageFirst"],_c1=["imageSecond"],_c2=["imageLast"],_c3=["lightboxImage"],_c4=["prevImageElem"],_c5=["lightboxContainer"];function LightboxComponent_div_0_Template(rf,ctx){if(1&rf&&(core.Tc(0,"div",11),core.Cd(1),core.Sc()),2&rf){const ctx_r0=core.fd();core.Bc(1),core.Dd(ctx_r0.counter)}}function LightboxComponent_div_1_Template(rf,ctx){if(1&rf){const _r8=core.Uc();core.Tc(0,"div",12),core.dd("click",function LightboxComponent_div_1_Template_div_click_0_listener(){core.vd(_r8);return core.fd().closeLightbox()}),core.Cd(1),core.Sc()}if(2&rf){const ctx_r1=core.fd();core.Bc(1),core.Dd(ctx_r1.closeButtonText)}}function LightboxComponent_div_2_Template(rf,ctx){1&rf&&core.Pc(0,"div",13)}function LightboxComponent_div_5_Template(rf,ctx){1&rf&&(core.Tc(0,"div",14),core.Pc(1,"div",13),core.Sc())}function LightboxComponent_div_6_Template(rf,ctx){1&rf&&(core.Tc(0,"div",15),core.Cd(1,"Failed to load image"),core.Sc())}let crystalui_angular_lightbox_EventService=class{constructor(){this.emitter=new ReplaySubject_ReplaySubject(1)}emitChangeEvent(data){this.emitter.next(data)}};crystalui_angular_lightbox_EventService.\u0275fac=function EventService_Factory(t){return new(t||crystalui_angular_lightbox_EventService)},crystalui_angular_lightbox_EventService.\u0275prov=core.Kc({token:crystalui_angular_lightbox_EventService,factory:function(t){return crystalui_angular_lightbox_EventService.\u0275fac(t)}});let LightboxCommonComponent=class{constructor(eventService){this.eventService=eventService,this.currentImageIndex=0,this.indexCurrentSlide=1,this.containerStyles={transition:"",transform:"",width:"",height:"",opacity:""},this.currImageLoadingState="not-loaded",this.isMobile=class{static mobileCheck(){var a,check=!1;return a=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check}}.mobileCheck()}get lightboxImage(){return this._lightboxImage}get lightboxImageElement(){if(this.lightboxImage)return this.lightboxImage.nativeElement}get lightboxImageNaturalHeight(){if(this.lightboxImageElement)return this.lightboxImageElement.naturalHeight}get lightboxImageNaturalWidth(){if(this.lightboxImageElement)return this.lightboxImageElement.naturalWidth}get index(){return this.currentImageIndex}get properties(){return this.lightboxData.properties}get images(){return this.lightboxData.images||[this.lightboxData.image]}get thumbnailImage(){return this.images[this.currentImageIndex].nativeElement}get thumbnailImagePosition(){return this.thumbnailImage.getBoundingClientRect()}get virtualImageDimension(){let height=this.lightboxImageNaturalHeight,width=height*this.imageAspectRatio;const windowWidth=document.body.clientWidth,windowHeight=window.innerHeight;return this.isImageLargerWindow?(height>windowHeight&&(height=windowHeight,width=height*this.imageAspectRatio),width>windowWidth&&(width=windowWidth,height=width/this.imageAspectRatio)):(width=this.lightboxImageNaturalWidth,height=this.lightboxImageNaturalHeight),0===width||0===Number.parseInt(height)?{width:200,height:200}:{width:width,height:height}}get containerInitialPosition(){const scale="initial-thumbnail-image"===this.showState?1:this.containerScale,top=this.thumbnailImagePosition.top;return"matrix("+scale+", 0, 0, "+scale+","+this.thumbnailImagePosition.left+","+top+")"}get containerFullscreenPosition(){return"translate3d("+(document.body.clientWidth-this.virtualImageDimension.width)/2+"px, "+(window.innerHeight-this.virtualImageDimension.height)/2+"px, 0)"}get containerScale(){return this.thumbnailImagePosition.width/this.virtualImageDimension.width}get imageAspectRatio(){return this.thumbnailImage.naturalWidth/this.thumbnailImage.naturalHeight}get isImageLargerWindow(){const imageNaturalWidth=this.lightboxImageNaturalWidth,imageNaturalHeight=this.lightboxImageNaturalHeight,windowWidth=document.body.clientWidth,windowHeight=window.innerHeight;return imageNaturalWidth>windowWidth||imageNaturalHeight>windowHeight}get isFirstImage(){return!this.properties.loop&&0===this.index}get isLastImage(){return!this.properties.loop&&this.index===this.latestImageIndex}get latestImageIndex(){return this.images.length-1}get backgroundColor(){const opacity=this.properties.backgroundOpacity;return"black"===this.properties.backgroundColor?"rgba(0, 0, 0, "+opacity+")":"rgba(255, 255, 255, "+opacity+")"}get animationDuration(){const animationDuration=this.properties.animationDuration;return"string"==typeof animationDuration?Number.parseInt(animationDuration):animationDuration}get animationMode(){return"error"===this.currImageLoadingState?"default":this.properties.animationMode}get animationTimingFunction(){return this.properties.animationTimingFunction}get closeButtonText(){return this.properties.closeButtonText}get counterSeparator(){return this.properties.counterSeparator}get counter(){return this.currentImageIndex+1+this.counterSeparator+this.images.length}emitState(type,state){"initial-virtual-image"!==state&&"initial-styles"!==state&&("initial-default"!==state&&"initial-thumbnail-image"!==state||(state="initial"),this.eventService.emitChangeEvent({type:type+":"+state}))}setShowState(state){this.showState=state,this.emitState("show-state",state)}setClosingState(state){this.closingState=state,this.emitState("closing-state",state)}setAnimationDuration(){this.hostStyleTransition="background-color "+this.animationDuration+"ms",this.containerStyles.transition="all "+this.animationDuration+"ms "+this.animationTimingFunction}setBackgroundColor(){this.hostStyleBackgroundColor=this.backgroundColor}getContainerHeight(){return this.thumbnailImagePosition.height/this.containerScale+"px"}showThumbnailImage(){this.thumbnailImage.style.opacity=""}hideThumbnailImage(){this.thumbnailImage.style.opacity=0}updateThumbnailPosition(){this.containerStyles.transform=this.containerInitialPosition}};LightboxCommonComponent.\u0275fac=function LightboxCommonComponent_Factory(t){return new(t||LightboxCommonComponent)(core.Oc(crystalui_angular_lightbox_EventService))},LightboxCommonComponent.\u0275cmp=core.Ic({type:LightboxCommonComponent,selectors:[["lightbox-common"]],viewQuery:function LightboxCommonComponent_Query(rf,ctx){if(1&rf&&(core.Id(_c0,3),core.Id(_c1,3),core.Id(_c2,3),core.Id(_c3,3)),2&rf){let _t;core.sd(_t=core.ed())&&(ctx._imageFirst=_t.first),core.sd(_t=core.ed())&&(ctx._imageSecond=_t.first),core.sd(_t=core.ed())&&(ctx._imageLast=_t.first),core.sd(_t=core.ed())&&(ctx._lightboxImage=_t.first)}},hostVars:4,hostBindings:function LightboxCommonComponent_HostBindings(rf,ctx){2&rf&&core.zd("transition",ctx.hostStyleTransition)("background-color",ctx.hostStyleBackgroundColor)},inputs:{lightboxData:"lightboxData"},decls:0,vars:0,template:function LightboxCommonComponent_Template(rf,ctx){},encapsulation:2}),LightboxCommonComponent.ctorParameters=()=>[{type:crystalui_angular_lightbox_EventService}],Object(tslib.__decorate)([Object(core.H)()],LightboxCommonComponent.prototype,"lightboxData",void 0),Object(tslib.__decorate)([Object(core.z)("style.backgroundColor")],LightboxCommonComponent.prototype,"hostStyleBackgroundColor",void 0),Object(tslib.__decorate)([Object(core.z)("style.transition")],LightboxCommonComponent.prototype,"hostStyleTransition",void 0),Object(tslib.__decorate)([Object(core.nb)("imageFirst",{static:!0})],LightboxCommonComponent.prototype,"_imageFirst",void 0),Object(tslib.__decorate)([Object(core.nb)("imageSecond",{static:!0})],LightboxCommonComponent.prototype,"_imageSecond",void 0),Object(tslib.__decorate)([Object(core.nb)("imageLast",{static:!0})],LightboxCommonComponent.prototype,"_imageLast",void 0),Object(tslib.__decorate)([Object(core.nb)("lightboxImage",{static:!0})],LightboxCommonComponent.prototype,"_lightboxImage",void 0);let crystalui_angular_lightbox_LightboxComponent=class extends LightboxCommonComponent{constructor(elementRef,ref,eventService){super(eventService),this.elementRef=elementRef,this.ref=ref,this.eventService=eventService,this.spinnerHeight=30,this.minTimeout=30,this.preloaderTimeout=100,this.spinnerStyles={transform:""},this.configThumbnailPreloader=!0,this.events=new core.x,this.hostShown=!1,this.hideControls=!1}get simpleMode(){return this.properties.simpleMode}get hostLightTheme(){return"white"===this.properties.backgroundColor}get currImagePath(){let path,image=this.images[this.index];return!!image&&(image.fullImage&&image.fullImage.path?path=image.fullImage.path:image.thumbnailImage&&image.thumbnailImage.path?path=image.thumbnailImage.path:image.path&&(path=image.path),path)}get prevImagePath(){return this.images[this.prevIndex]}set prevImagePath(value){this.images[this.prevIndex]=value}get isHiddenPrevArrow(){return this.isFirstImage&&!this.properties.loop||this.isZoomIn}get isHiddenNextArrow(){return this.isLastImage&&!this.properties.loop||this.isZoomIn}get isPreloader(){return"zoom-preloader"===this.animationMode&&"animation-end"!=this.showState&&"loading"===this.currImageLoadingState}get imageOrientation(){return this.thumbnailImage.naturalWidth>this.thumbnailImage.naturalHeight?"horizontal":"vertical"}scrolling(){"initial-thumbnail-image"!==this.showState&&"initial-virtual-image"!==this.showState&&"animation"!==this.closingState||this.updateThumbnailPosition()}onKeyDown(event){switch(event.key){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next();break;case"Escape":this.closeLightbox()}}onMouseEnter(event){this.hideControls=!1}transitionEnd(event){"transform"===event.propertyName&&this.hostAnimation&&(this.hostAnimation=!1)}ngOnInit(){this.currentImageIndex=this.properties.index,this.initialLightbox()}ngAfterViewInit(){setTimeout(()=>{"not-loaded"===this.currImageLoadingState&&(this.currImageLoadingState="loading")},this.preloaderTimeout),"default"===this.animationMode&&setTimeout(()=>{this.showLightboxAnimation()},this.minTimeout)}onImageLoaded(){"zoom-preloader"===this.animationMode&&"initial-thumbnail-image"===this.showState&&(this.initialLightboxVirtualImage(),setTimeout(()=>{this.currImageLoadingState="uploaded",this.showLightboxAnimation(),this.properties.hideThumbnail&&this.hideThumbnailImage()},this.minTimeout)),"animation-end"===this.showState&&(this.currImageLoadingState="uploaded",this.properties.hideThumbnail&&this.hideThumbnailImage()),this.ref.detectChanges()}onImageError(event){this.currImageLoadingState="error",this.initialLightboxDefault(),setTimeout(()=>{this.showLightboxAnimation()},this.minTimeout)}onContainerClick(event){(event.target===this.lightboxContainerElem.nativeElement||this.simpleMode)&&this.closeLightbox()}initialLightbox(){switch(this.setMaxDimensions(),this.setAnimationDuration(),this.animationMode){case"zoom-preloader":this.initialLightboxThumbnailImage();break;case"default":this.initialLightboxDefault()}}initialLightboxDefault(){this.showState="initial-default",this.containerStyles={transform:"translate3d(0, 0, 0)",height:"100%",width:"100%",opacity:"0"}}initialLightboxVirtualImage(){this.setShowState("initial-virtual-image"),this.containerStyles={transform:this.containerInitialPosition,height:this.virtualImageDimension.height+"px",width:this.virtualImageDimension.width+"px"}}initialLightboxThumbnailImage(){this.setShowState("initial-thumbnail-image"),this.containerStyles={transform:this.containerInitialPosition,height:this.thumbnailImagePosition.height+"px",width:this.thumbnailImagePosition.width+"px"}}showLightboxAnimation(){this.hostAnimation=!0,this.setShowState("animation"),this.hostShown=!0,this.setBackgroundColor(),this.setAnimationDuration(),"zoom-preloader"===this.animationMode&&"error"!==this.currImageLoadingState&&(this.containerStyles.transform=this.containerFullscreenPosition),"default"===this.animationMode&&(this.containerStyles.opacity="1")}showLightboxAnimationEnd(){this.setShowState("animation-end"),this.containerStyles={transform:"translate3d(0, 0, 0)",height:"100%",width:"100%"}}closeLightbox(){this.setClosingState("initial"),this.hostShown=!1,this.closeLightboxInitial()}closeLightboxInitial(){this.setClosingState("initial-styles"),"zoom-preloader"===this.animationMode&&(this.containerStyles={transform:this.containerFullscreenPosition,height:this.virtualImageDimension.height+"px",width:this.virtualImageDimension.width+"px"}),"default"===this.animationMode&&(this.containerStyles.opacity="1"),setTimeout(()=>{this.closeLightboxAnimation()},this.minTimeout)}closeLightboxAnimation(){this.setClosingState("animation"),"zoom-preloader"===this.animationMode&&(this.hostAnimation=!0,this.containerStyles={transform:this.containerInitialPosition,height:this.getContainerHeight(),width:this.getContainerWidth()},this.hostStyleBackgroundColor=""),"default"===this.animationMode&&(this.hostAnimation=!0,this.containerStyles.opacity="0",this.hostStyleBackgroundColor=""),this.setAnimationDuration(),0===this.animationDuration&&this.closeLightboxAnimationEnd()}closeLightboxAnimationEnd(){this.setClosingState("animation-end"),this.events.emit({type:"close"}),"zoom-preloader"===this.animationMode&&this.showThumbnailImage()}handleLightboxTransitionEnd(event){"animation"===this.showState&&this.showLightboxAnimationEnd(),"animation"===this.closingState&&this.closeLightboxAnimationEnd()}next(){if("zoom-preloader"===this.animationMode&&this.showThumbnailImage(),this.isLastImage){if(!this.properties.loop)return;this.currentImageIndex=0}else this.currentImageIndex++,this.currImageLoadingState="loading";setTimeout(()=>{"uploaded"!==this.currImageLoadingState&&(this.currImageLoadingState="loading")},this.preloaderTimeout)}prev(){if("zoom-preloader"===this.animationMode&&this.showThumbnailImage(),this.isFirstImage){if(!this.properties.loop)return;this.currentImageIndex=this.latestImageIndex}else this.currentImageIndex--,this.currImageLoadingState="loading";setTimeout(()=>{"uploaded"!==this.currImageLoadingState&&(this.currImageLoadingState="loading")},this.preloaderTimeout)}setMaxDimensions(){this.lightboxImage.nativeElement.style.maxHeight="calc("+this.properties.imageMaxHeight+")",this.lightboxImage.nativeElement.style.maxWidth=this.properties.imageMaxWidth}handlePinchZoomEvents(event){"zoom-in"===event.type&&(this.isZoomIn=!0),"zoom-out"===event.type&&(this.isZoomIn=!1)}getContainerWidth(){return this.thumbnailImagePosition.width/this.containerScale+"px"}};crystalui_angular_lightbox_LightboxComponent.\u0275fac=function LightboxComponent_Factory(t){return new(t||crystalui_angular_lightbox_LightboxComponent)(core.Oc(core.v),core.Oc(core.k),core.Oc(crystalui_angular_lightbox_EventService))},crystalui_angular_lightbox_LightboxComponent.\u0275cmp=core.Ic({type:crystalui_angular_lightbox_LightboxComponent,selectors:[["crystal-lightbox"]],viewQuery:function LightboxComponent_Query(rf,ctx){if(1&rf&&(core.Id(_c4,3),core.Id(_c5,3)),2&rf){let _t;core.sd(_t=core.ed())&&(ctx.prevImageElem=_t.first),core.sd(_t=core.ed())&&(ctx.lightboxContainerElem=_t.first)}},hostVars:12,hostBindings:function LightboxComponent_HostBindings(rf,ctx){1&rf&&core.dd("scroll",function LightboxComponent_scroll_HostBindingHandler(){return ctx.scrolling()},!1,core.ud)("keydown",function LightboxComponent_keydown_HostBindingHandler($event){return ctx.onKeyDown($event)},!1,core.ud)("mouseenter",function LightboxComponent_mouseenter_HostBindingHandler($event){return ctx.onMouseEnter($event)})("transitionend",function LightboxComponent_transitionend_HostBindingHandler($event){return ctx.transitionEnd($event)}),2&rf&&(core.zd("background-color",ctx.hostStyleBackgroundColor),core.Gc("lightbox-shown",ctx.hostShown)("lightbox-hide-controls",ctx.hideControls)("lightbox-simple-mode",ctx.simpleMode)("lightbox-light",ctx.hostLightTheme)("lightbox-animation",ctx.hostAnimation))},features:[core.yc],decls:11,vars:11,consts:[["class","lightbox-counter",4,"ngIf"],["class","lightbox-close",3,"click",4,"ngIf"],["class","lightbox-spinner",4,"ngIf"],[1,"lightbox-container",3,"ngStyle","transitionend","click"],["lightboxContainer",""],["class","lightbox-preloader",4,"ngIf"],["class","lightbox-error",4,"ngIf"],[1,"lightbox-curr-image",3,"src","load","error"],["lightboxImage",""],[1,"lightbox-prev",3,"hidden","click"],[1,"lightbox-next",3,"hidden","click"],[1,"lightbox-counter"],[1,"lightbox-close",3,"click"],[1,"lightbox-spinner"],[1,"lightbox-preloader"],[1,"lightbox-error"]],template:function LightboxComponent_Template(rf,ctx){1&rf&&(core.Ad(0,LightboxComponent_div_0_Template,2,1,"div",0),core.Ad(1,LightboxComponent_div_1_Template,2,1,"div",1),core.Ad(2,LightboxComponent_div_2_Template,1,0,"div",2),core.Tc(3,"div",3,4),core.dd("transitionend",function LightboxComponent_Template_div_transitionend_3_listener($event){return ctx.handleLightboxTransitionEnd($event)})("click",function LightboxComponent_Template_div_click_3_listener($event){return ctx.onContainerClick($event)}),core.Ad(5,LightboxComponent_div_5_Template,2,0,"div",5),core.Ad(6,LightboxComponent_div_6_Template,2,0,"div",6),core.Tc(7,"img",7,8),core.dd("load",function LightboxComponent_Template_img_load_7_listener(){return ctx.onImageLoaded()})("error",function LightboxComponent_Template_img_error_7_listener($event){return ctx.onImageError($event)}),core.Sc(),core.Sc(),core.Tc(9,"div",9),core.dd("click",function LightboxComponent_Template_div_click_9_listener(){return ctx.prev()}),core.Sc(),core.Tc(10,"div",10),core.dd("click",function LightboxComponent_Template_div_click_10_listener(){return ctx.next()}),core.Sc()),2&rf&&(core.ld("ngIf",ctx.properties.counter&&ctx.images.length>1),core.Bc(1),core.ld("ngIf",!ctx.simpleMode),core.Bc(1),core.ld("ngIf","loading"===ctx.currImageLoadingState&&"animation-end"===ctx.showState),core.Bc(1),core.ld("ngStyle",ctx.containerStyles),core.Bc(2),core.ld("ngIf",ctx.isPreloader),core.Bc(1),core.ld("ngIf","error"===ctx.currImageLoadingState&&!ctx.closingState),core.Bc(1),core.Gc("lightbox-show","uploaded"===ctx.currImageLoadingState),core.ld("src",ctx.currImagePath,core.xd),core.Bc(2),core.ld("hidden",ctx.isHiddenPrevArrow),core.Bc(1),core.ld("hidden",ctx.isHiddenNextArrow))},directives:[common.m,common.n],styles:['.lightbox-spinner[_ngcontent-%COMP%], .lightbox-spinner[_ngcontent-%COMP%]:after, .lightbox-spinner[_ngcontent-%COMP%]:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite lightbox-load;animation:1.5s ease-in-out infinite lightbox-load}.lightbox-spinner[_ngcontent-%COMP%]{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.lightbox-spinner[_ngcontent-%COMP%]:after, .lightbox-spinner[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0}.lightbox-spinner[_ngcontent-%COMP%]:before{left:-32px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.lightbox-spinner[_ngcontent-%COMP%]:after{left:32px}@-webkit-keyframes lightbox-load{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes lightbox-load{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}.lightbox-shown[_nghost-%COMP%]{opacity:1}.lightbox-shown[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], .lightbox-shown[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], .lightbox-shown[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:.5;transition-delay:.1s}.lightbox-shown[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%]:hover, .lightbox-shown[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%]:hover, .lightbox-shown[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]:hover{opacity:1;transition-delay:0}.lightbox-shown[_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%]{opacity:1}.lightbox-hide-controls[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], .lightbox-hide-controls[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], .lightbox-hide-controls[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:0}.lightbox-simple-mode[_nghost-%COMP%]   .lightbox-container[_ngcontent-%COMP%]{cursor:zoom-out}[_nghost-%COMP%]:not(.lightbox-animation)   .lightbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;top:0;left:0;height:100%}.lightbox-light[_nghost-%COMP%]{color:#000;text-shadow:none}[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;text-shadow:0 0 1px rgba(0,0,0,.65);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10000}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;max-width:100%;max-height:100%}[_nghost-%COMP%]   img.lightbox-curr-image.lightbox-show[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   img.lightbox-curr-image[_ngcontent-%COMP%]{opacity:0;z-index:10}[_nghost-%COMP%]   .lightbox-container.lightbox-hide[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .lightbox-container[_ngcontent-%COMP%]{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform-origin:top left}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:absolute}[_nghost-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]{position:absolute;top:51%;left:50%;margin-top:-15px;margin-left:-5px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]{margin-top:-9px;margin-left:-3px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:before{width:6px;height:6px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:before{left:-21px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:after{left:21px}[_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%]{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;z-index:30}[_nghost-%COMP%]   .lightbox-description[_ngcontent-%COMP%]{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}[_nghost-%COMP%]   .lightbox-error[_ngcontent-%COMP%]{color:rgba(255,255,255,.75);font-size:19px}[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out}[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{width:100px;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%]{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:0;transition:opacity 150ms cubic-bezier(.475,.105,.445,.945)}']}),crystalui_angular_lightbox_LightboxComponent.ctorParameters=()=>[{type:core.v},{type:core.k},{type:crystalui_angular_lightbox_EventService}],Object(tslib.__decorate)([Object(core.z)("class.lightbox-shown")],crystalui_angular_lightbox_LightboxComponent.prototype,"hostShown",void 0),Object(tslib.__decorate)([Object(core.z)("class.lightbox-hide-controls")],crystalui_angular_lightbox_LightboxComponent.prototype,"hideControls",void 0),Object(tslib.__decorate)([Object(core.z)("class.lightbox-animation")],crystalui_angular_lightbox_LightboxComponent.prototype,"hostAnimation",void 0),Object(tslib.__decorate)([Object(core.z)("class.lightbox-simple-mode")],crystalui_angular_lightbox_LightboxComponent.prototype,"simpleMode",null),Object(tslib.__decorate)([Object(core.z)("class.lightbox-light")],crystalui_angular_lightbox_LightboxComponent.prototype,"hostLightTheme",null),Object(tslib.__decorate)([Object(core.z)("style.backgroundColor")],crystalui_angular_lightbox_LightboxComponent.prototype,"hostStyleBackgroundColor",void 0),Object(tslib.__decorate)([Object(core.nb)("prevImageElem",{static:!0})],crystalui_angular_lightbox_LightboxComponent.prototype,"prevImageElem",void 0),Object(tslib.__decorate)([Object(core.nb)("lightboxContainer",{static:!0})],crystalui_angular_lightbox_LightboxComponent.prototype,"lightboxContainerElem",void 0),Object(tslib.__decorate)([Object(core.A)("window:scroll")],crystalui_angular_lightbox_LightboxComponent.prototype,"scrolling",null),Object(tslib.__decorate)([Object(core.A)("window:keydown",["$event"])],crystalui_angular_lightbox_LightboxComponent.prototype,"onKeyDown",null),Object(tslib.__decorate)([Object(core.A)("mouseenter",["$event"])],crystalui_angular_lightbox_LightboxComponent.prototype,"onMouseEnter",null),Object(tslib.__decorate)([Object(core.A)("transitionend",["$event"])],crystalui_angular_lightbox_LightboxComponent.prototype,"transitionEnd",null);const DefaultProperties={loop:!1,index:0,counter:!1,imageMaxHeight:"100%",imageMaxWidth:"100%",animationDuration:350,animationMode:"zoom-preloader",animationTimingFunction:"cubic-bezier(0.475, 0.105, 0.445, 0.945)",closeButtonText:"Close",counterSeparator:"/",disable:!1,simpleMode:!1,backgroundColor:"black",backgroundOpacity:1,hideThumbnail:!0,gestureEnable:!1};let CrystalLightbox=class{constructor(componentFactoryResolver,appRef,injector){this.componentFactoryResolver=componentFactoryResolver,this.appRef=appRef,this.injector=injector}appendComponentToBody(component,lightboxData){const componentRef=this.componentFactoryResolver.resolveComponentFactory(component).create(this.injector);componentRef.instance.lightboxData=lightboxData,this.appRef.attachView(componentRef.hostView);const domElem=componentRef.hostView.rootNodes[0];document.body.appendChild(domElem),componentRef.instance.events.subscribe(event=>{"close"===event.type&&(this.appRef.detachView(componentRef.hostView),componentRef.destroy())})}open(lightboxData){lightboxData.properties=this.applyPropertieDefaults(DefaultProperties,lightboxData.properties);let component=this.getLightboxComponent();this.appendComponentToBody(component,lightboxData)}getLightboxComponent(){return crystalui_angular_lightbox_LightboxComponent}applyPropertieDefaults(defaultProperties,properties){return properties||(properties={}),properties.index||(properties.index=0),this._defaultProperties=Object.assign({},defaultProperties),Object.assign(this._defaultProperties,properties)}};CrystalLightbox.\u0275fac=function CrystalLightbox_Factory(t){return new(t||CrystalLightbox)(core.ad(core.p),core.ad(core.g),core.ad(core.G))},CrystalLightbox.\u0275prov=core.Kc({token:CrystalLightbox,factory:function(t){return CrystalLightbox.\u0275fac(t)}}),CrystalLightbox.ctorParameters=()=>[{type:core.p},{type:core.g},{type:core.G}];let crystalui_angular_lightbox_LightboxDirective=class{constructor(lightbox,eventService,elementRef){this.lightbox=lightbox,this.eventService=eventService,this.elementRef=elementRef,this.properties={},this.events=new core.x,this.hostLightboxGroup=!0,this.globalEventsSubscription=this.eventService.emitter.subscribe(event=>{this.handleGlobalEvents(event)})}get hostSimpleMode(){return this.simpleMode}get isGroupImage(){return this.elementRef.nativeElement.closest(".lightbox-group")}onClick(event){this.disable||(this.isGroupImage?this.eventService.emitChangeEvent({type:"thumbnail:click",elementRef:this.elementRef,properties:this.properties}):(this.image=this.getImage(),this.lightbox.open({images:[this.image],properties:this.properties,index:0})))}ngOnChanges(changes){this.properties=Object.assign({},this.properties,this.getProperties(changes))}handleGlobalEvents(event){this.events.emit(event)}getImage(){let image={};const nativeElement=this.elementRef.nativeElement;return this.fullImage&&(image.fullImage=this.fullImage),image.thumbnailImage={path:nativeElement.src,height:nativeElement.naturalHeight,width:nativeElement.naturalWidth},image.nativeElement=nativeElement,image}getProperties(changes){let properties={};for(var prop in changes)"fullImage"!==prop&&(properties[prop]=changes[prop].currentValue);return properties}};crystalui_angular_lightbox_LightboxDirective.\u0275fac=function LightboxDirective_Factory(t){return new(t||crystalui_angular_lightbox_LightboxDirective)(core.Oc(CrystalLightbox),core.Oc(crystalui_angular_lightbox_EventService),core.Oc(core.v))},crystalui_angular_lightbox_LightboxDirective.\u0275dir=core.Jc({type:crystalui_angular_lightbox_LightboxDirective,selectors:[["","lightbox",""]],hostVars:4,hostBindings:function LightboxDirective_HostBindings(rf,ctx){1&rf&&core.dd("click",function LightboxDirective_click_HostBindingHandler($event){return ctx.onClick($event)}),2&rf&&core.Gc("lightbox-single",ctx.hostLightboxGroup)("lightbox-simple-mode",ctx.hostSimpleMode)},inputs:{properties:"properties",fullImage:"fullImage",loop:"loop",backgroundOpacity:"backgroundOpacity",counter:"counter",imageMaxHeight:"imageMaxHeight",imageMaxWidth:"imageMaxWidth",animationDuration:"animationDuration",animationMode:"animationMode",animationTimingFunction:"animationTimingFunction",closeButtonText:"closeButtonText",counterSeparator:"counterSeparator",disable:"disable",simpleMode:"simpleMode",backgroundColor:"backgroundColor",hideThumbnail:"hideThumbnail",gestureEnable:"gestureEnable"},outputs:{events:"events"},features:[core.zc]}),crystalui_angular_lightbox_LightboxDirective.ctorParameters=()=>[{type:CrystalLightbox},{type:crystalui_angular_lightbox_EventService},{type:core.v}],Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"fullImage",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"properties",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"loop",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"backgroundOpacity",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"counter",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"imageMaxHeight",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"imageMaxWidth",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"animationDuration",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"animationMode",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"animationTimingFunction",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"closeButtonText",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"counterSeparator",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"disable",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"simpleMode",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"backgroundColor",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"hideThumbnail",void 0),Object(tslib.__decorate)([Object(core.H)()],crystalui_angular_lightbox_LightboxDirective.prototype,"gestureEnable",void 0),Object(tslib.__decorate)([Object(core.T)()],crystalui_angular_lightbox_LightboxDirective.prototype,"events",void 0),Object(tslib.__decorate)([Object(core.z)("class.lightbox-single")],crystalui_angular_lightbox_LightboxDirective.prototype,"hostLightboxGroup",void 0),Object(tslib.__decorate)([Object(core.z)("class.lightbox-simple-mode")],crystalui_angular_lightbox_LightboxDirective.prototype,"hostSimpleMode",null),Object(tslib.__decorate)([Object(core.A)("click",["$event"])],crystalui_angular_lightbox_LightboxDirective.prototype,"onClick",null);let LightboxGroupDirective=class{constructor(eventService,lightbox){this.eventService=eventService,this.lightbox=lightbox,this.thumbnailImages=[],this.images=[],this.properties={},this.hostLightboxGroup=!0,this.globalEventsSubscription=this.eventService.emitter.subscribe(event=>{this.handleGlobalEvents(event)})}get lightboxDirectiveList(){return this._lightboxDirectiveList?this._lightboxDirectiveList.toArray():[]}handleGlobalEvents(event){if("thumbnail:click"===event.type){if(this.thumbnailImageElement=event.elementRef.nativeElement,this.thumbnailImages=this.getThumbnailImages(),this.thumbnailImageIndex=this.getThumbnailImageIndex(this.thumbnailImageElement),null==this.thumbnailImageIndex)return;this.thumbnailLightboxDirective=this.getThumbnailLightboxDirective(this.thumbnailImageIndex),this.images=this.getImages(),this.properties=event.properties,this.properties.index=this.thumbnailImageIndex,this.lightbox.open({images:this.images,properties:this.properties})}}getThumbnailImageIndex(element){const images=this.thumbnailImages;for(var i=0;i<images.length;i++)if(element===images[i])return i}getThumbnailLightboxDirective(index){return this.lightboxDirectiveList[index]}getThumbnailImages(){let thumbnailImages=[];return this.lightboxDirectiveList.forEach(el=>{thumbnailImages.push(el.elementRef.nativeElement)}),thumbnailImages}getImages(){let images=[];return this.lightboxDirectiveList.forEach(el=>{let image={};const nativeElement=el.elementRef.nativeElement;el.fullImage&&(image.fullImage=el.fullImage),image.thumbnailImage={path:nativeElement.src,height:nativeElement.naturalHeight,width:nativeElement.naturalWidth},image.nativeElement=nativeElement,images.push(image)}),images}};LightboxGroupDirective.\u0275fac=function LightboxGroupDirective_Factory(t){return new(t||LightboxGroupDirective)(core.Oc(crystalui_angular_lightbox_EventService),core.Oc(CrystalLightbox))},LightboxGroupDirective.\u0275dir=core.Jc({type:LightboxGroupDirective,selectors:[["","lightbox-group",""]],contentQueries:function LightboxGroupDirective_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core.Hc(dirIndex,crystalui_angular_lightbox_LightboxDirective,1),2&rf){let _t;core.sd(_t=core.ed())&&(ctx._lightboxDirectiveList=_t)}},hostVars:2,hostBindings:function LightboxGroupDirective_HostBindings(rf,ctx){2&rf&&core.Gc("lightbox-group",ctx.hostLightboxGroup)}}),LightboxGroupDirective.ctorParameters=()=>[{type:crystalui_angular_lightbox_EventService},{type:CrystalLightbox}],Object(tslib.__decorate)([Object(core.z)("class.lightbox-group")],LightboxGroupDirective.prototype,"hostLightboxGroup",void 0),Object(tslib.__decorate)([Object(core.s)(crystalui_angular_lightbox_LightboxDirective,{descendants:!0})],LightboxGroupDirective.prototype,"_lightboxDirectiveList",void 0);let CrystalLightboxModule=class{};CrystalLightboxModule.\u0275fac=function CrystalLightboxModule_Factory(t){return new(t||CrystalLightboxModule)},CrystalLightboxModule.\u0275mod=core.Mc({type:CrystalLightboxModule}),CrystalLightboxModule.\u0275inj=core.Lc({providers:[CrystalLightbox,crystalui_angular_lightbox_EventService],imports:[[common.c]]})}};